# Phase 3.1: Shell Installer Robustness - Context

**Gathered:** 2026-02-22
**Status:** Ready for planning

<domain>
## Phase Boundary

Fix idempotency behavior in `install_starship()` and `install_tmux()` so re-running bootstrap.sh correctly skips already-installed tools and reports them as "Skipped" in the summary. Also fix REQUIREMENTS.md traceability so MAINT-01 points to Phase 3. No new install targets, no new CLI tools — three targeted corrections only.

</domain>

<decisions>
## Implementation Decisions

### Starship version check
- Loose check — if the starship binary exists at all, skip re-download (no version pinning)
- Claude decides exactly what "installed" means (binary presence) based on how bootstrap.sh installs it
- Claude decides how to handle version mismatch (either skip-with-note or skip-silently) based on codebase conventions

### Skip detection pattern
- Standardize across ALL tool installers in bootstrap.sh, not just starship and tmux
- Use a shared helper function (e.g., `is_installed()` or `already_installed()`) called by each installer
- Skip check uses explicit path check (`test -f <install_path>`) rather than `command -v`
- Claude decides how skip status is recorded and surfaced to the summary (e.g., separate arrays or return value), based on existing summary implementation

### Log & summary output
- Log messages should match the existing log style in bootstrap.sh (format, prefix conventions)
- Skip should appear BOTH inline (during execution) AND in the final summary
- Summary formatting (e.g., separate Installed/Skipped sections vs labeled list) — Claude decides based on existing summary structure
- Color/ANSI formatting should match whatever conventions are already in bootstrap.sh

### Claude's Discretion
- Exact binary/path for starship's installed location (inspect bootstrap.sh)
- How skip status is tracked for summary aggregation
- Summary section layout (Installed vs Skipped visual structure)
- Color usage for skip messages

</decisions>

<specifics>
## Specific Ideas

- The success criteria wording ("already installed — skipping") is a target behavior, not necessarily the exact log string — match the existing log style first
- All installer functions should behave consistently after this fix, not just the two broken ones

</specifics>

<deferred>
## Deferred Ideas

None — discussion stayed within phase scope.

</deferred>

---

*Phase: 03.1-shell-robustness-cleanup*
*Context gathered: 2026-02-22*
