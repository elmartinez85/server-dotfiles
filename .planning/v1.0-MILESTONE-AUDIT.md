---
milestone: v1.0
audited: 2026-02-23T02:10:00Z
status: tech_debt
scores:
  requirements: 26/26
  phases: 4/4
  integration: 18/18
  flows: 3/3
gaps:
  requirements: []
  integration: []
  flows: []
tech_debt:
  - phase: 01-foundation
    items:
      - "bootstrap.sh line 7: DOTFILES_REPO contains <YOUR_GITHUB_USER> placeholder — git clone fails until replaced with real GitHub username. Pre-publish action required. Not a code defect; documented in 01-02-SUMMARY.md. Affects BOOT-01 live execution (code path is correct)."
  - phase: 02-shell-environment-and-config-deployment
    items:
      - "Phase 02 VERIFICATION.md status is human_needed (not passed) — 5 live-session items unverified: (1) starship prompt renders in zsh, (2) zsh-autosuggestions ghost text active, (3) zsh-syntax-highlighting colorizes commands, (4) C-a prefix active in tmux, (5) full idempotency on second bootstrap run. Code is statically verified correct; live terminal behavior requires real server."
  - phase: cross-phase
    items:
      - "scripts/verify.sh covers only Phase 3 (CLI tools + Docker). No operator-runnable post-bootstrap check exists for Phase 1 outputs (gitleaks binary, .git/hooks/pre-commit) or Phase 2 outputs (zsh default shell, oh-my-zsh, starship, tmux, dotfile symlinks). By design — no requirement mandated Phase 1/2 verify scripts. Affects BOOT-04, SHELL-01 through SHELL-06, CONF-01 through CONF-05 operator confidence only."
      - "16 total human-verification items across 4 phases require a real server with root access and network connectivity to confirm runtime behavior: 5 (Phase 01) + 5 (Phase 02) + 4 (Phase 03) + 2 (Phase 03.1). All are confidence tests; none are implementation gaps."
previous_audit_debt_closed:
  - item: "install_starship() idempotency — was unconditionally re-downloading starship on every bootstrap re-run"
    closed_by: "Phase 3.1 plan 03.1-01 — _already_installed helper added to install-shell.sh at line 117"
  - item: "install_tmux() summary tracking — was always appending to _SUMMARY_INSTALLED even on re-runs"
    closed_by: "Phase 3.1 plan 03.1-01 — pkg_installed tmux pre-check added before pkg_install at line 139"
  - item: "MAINT-01 traceability — REQUIREMENTS.md incorrectly showed Phase 4 for a Phase 3 deliverable"
    closed_by: "Phase 3.1 VERIFICATION.md confirmed REQUIREMENTS.md line 127 already correct — no edit required"
---

# Milestone v1.0 — Re-Audit Report (Post Phase 3.1)

**Milestone:** v1.0 — server-dotfiles bootstrap system
**Audited:** 2026-02-23 (re-audit after Phase 3.1 gap closure)
**Previous audit:** 2026-02-22 — found 3 tech debt items, status: tech_debt
**Status:** TECH DEBT — all requirements met, all previous tech debt cleared, remaining items are pre-publish and human-verification deferred tasks
**Phases in scope:** 4/4 completed (Phase 4: Security and Maintenance not yet started — out of scope)

---

## Phase Status

| Phase | Plans | VERIFICATION Status | Score | Critical Gaps |
|-------|-------|---------------------|-------|---------------|
| 01: Foundation | 3/3 | passed | 4/4 | None |
| 02: Shell Environment and Config Deployment | 2/2 | human_needed | 9/9 automated | 5 live-session items deferred |
| 03: CLI Tools and Docker | 4/4 | passed | 16/16 | None |
| 03.1: Shell Robustness Cleanup | 1/1 | passed | 4/4 | None |

**Note on Phase 02 `human_needed`:** All 9 automated truths verified. 5 items require live interactive zsh and tmux sessions to confirm rendering behavior. The implementation is statically verified correct — this is a verification methodology limitation, not a code gap.

---

## Requirements Coverage (3-Source Cross-Reference)

### Source A — REQUIREMENTS.md Traceability Table

| REQ-ID | Phase | Traceability Status | Checked |
|--------|-------|---------------------|---------|
| BOOT-01 | Phase 1 | Complete | [x] |
| BOOT-02 | Phase 1 | Complete | [x] |
| BOOT-03 | Phase 1 | Complete | [x] |
| BOOT-04 | Phase 1 | Complete | [x] |
| SHELL-01 | Phase 2 | Complete | [x] |
| SHELL-02 | Phase 2 | Complete | [x] |
| SHELL-03 | Phase 2 | Complete | [x] |
| SHELL-04 | Phase 2 | Complete | [x] |
| SHELL-05 | Phase 2 | Complete | [x] |
| SHELL-06 | Phase 2 | Complete | [x] |
| CONF-01 | Phase 2 | Complete | [x] |
| CONF-02 | Phase 2 | Complete | [x] |
| CONF-03 | Phase 2 | Complete | [x] |
| CONF-04 | Phase 2 | Complete | [x] |
| CONF-05 | Phase 2 | Complete | [x] |
| TOOL-01 | Phase 3 | Complete | [x] |
| TOOL-02 | Phase 3 | Complete | [x] |
| TOOL-03 | Phase 3 | Complete | [x] |
| TOOL-04 | Phase 3 | Complete | [x] |
| TOOL-05 | Phase 3 | Complete | [x] |
| TOOL-06 | Phase 3 | Complete | [x] |
| TOOL-07 | Phase 3 | Complete | [x] |
| DOCK-01 | Phase 3 | Complete | [x] |
| DOCK-02 | Phase 3 | Complete | [x] |
| DOCK-03 | Phase 3 | Complete | [x] |
| DOCK-04 | Phase 3 | Complete | [x] |
| MAINT-01 | Phase 3 | Complete | [x] |

**Phase 4 requirements (SEC-01 through SEC-06, MAINT-02):** Out of scope — Phase 4 not yet started.

### Source B — Phase VERIFICATION.md Requirements Tables

| REQ-ID | VERIFICATION Phase | VERIFICATION Status | Evidence |
|--------|-------------------|---------------------|----------|
| BOOT-01 | Phase 01 | SATISFIED | bootstrap.sh executable, clones repo, sources libs, runs phase scripts |
| BOOT-02 | Phase 01, 03.1 | SATISFIED | git pull guard, version-checked gitleaks, diff-q hook check, _already_installed starship, pkg_installed tmux |
| BOOT-03 | Phase 01 | SATISFIED | os_detect_arch() handles x86_64, aarch64, arm64; ARCH exported |
| BOOT-04 | Phase 01 | SATISFIED | hooks/pre-commit uses gitleaks protect --staged --redact |
| SHELL-01 | Phase 02 | SATISFIED | install_zsh() installs via pkg_install, sets via usermod -s |
| SHELL-02 | Phase 02 | SATISFIED | install_ohmyzsh() with RUNZSH=no CHSH=no KEEP_ZSHRC=yes; directory guard |
| SHELL-03 | Phase 02, 03.1 | SATISFIED | install_starship() via official installer; _already_installed guard (03.1); .zshrc ends eval "$(starship init zsh)" |
| SHELL-04 | Phase 02, 03.1 | SATISFIED | install_tmux() via pkg_install tmux; pkg_installed pre-check (03.1 fix) |
| SHELL-05 | Phase 02 | SATISFIED | install_zsh_plugins() clones zsh-autosuggestions; .zshrc plugins=() includes it |
| SHELL-06 | Phase 02 | SATISFIED | install_zsh_plugins() clones zsh-syntax-highlighting; .zshrc plugins=() includes it |
| CONF-01 | Phase 02 | SATISFIED | deploy_dotfiles() symlinks .zshrc and .zsh_aliases |
| CONF-02 | Phase 02 | SATISFIED | deploy_dotfiles() symlinks .tmux.conf |
| CONF-03 | Phase 02 | SATISFIED | mkdir -p ~/.config + symlinks starship.toml to ~/.config/starship.toml |
| CONF-04 | Phase 02 | SATISFIED | _deploy_symlink Case 2 backs up real files to ~/.dotfiles.bak/ |
| CONF-05 | Phase 02 | SATISFIED | .zsh_aliases provides eza/bat/rg/git/docker aliases |
| TOOL-01 | Phase 03 | SATISFIED | install_ripgrep installs to /usr/local/bin/rg; verify.sh checks rg |
| TOOL-02 | Phase 03 | SATISFIED | install_fd installs to /usr/local/bin/fd; verify.sh checks fd |
| TOOL-03 | Phase 03 | SATISFIED | install_fzf installs to /usr/local/bin/fzf; verify.sh checks fzf |
| TOOL-04 | Phase 03 | SATISFIED | install_eza installs to /usr/local/bin/eza; verify.sh checks eza |
| TOOL-05 | Phase 03 | SATISFIED | install_bat installs to /usr/local/bin/bat; verify.sh checks bat |
| TOOL-06 | Phase 03 | SATISFIED | install_delta installs to /usr/local/bin/delta; verify.sh checks delta |
| TOOL-07 | Phase 03 | SATISFIED | install_nvim installs to /usr/local/bin/nvim via tarball (not AppImage); verify.sh checks nvim |
| DOCK-01 | Phase 03 | SATISFIED | Official apt repo with ubuntu/debian/raspbian→debian distro detection |
| DOCK-02 | Phase 03 | SATISFIED | docker-compose-plugin in same apt block; verify.sh checks docker compose version |
| DOCK-03 | Phase 03 | SATISFIED | add_user_to_docker_group uses usermod -aG docker; verify.sh tests docker run --rm hello-world |
| DOCK-04 | Phase 03 | SATISFIED | install_lazydocker from GitHub Releases flat archive; verify.sh checks lazydocker binary |
| MAINT-01 | Phase 03 | SATISFIED | lib/versions.sh created with all 9 pinned versions; all install scripts source it |

**Orphaned requirements:** None. All 26 in-scope requirements appear in their assigned phase VERIFICATION.md.

### Source C — SUMMARY.md Frontmatter requirements-completed

| REQ-ID | Claimed in SUMMARY | File |
|--------|-------------------|------|
| BOOT-01 | Yes | 01-02-SUMMARY.md |
| BOOT-02 | Yes | 01-01-SUMMARY.md, 01-02-SUMMARY.md |
| BOOT-03 | Yes | 01-01-SUMMARY.md, 01-02-SUMMARY.md |
| BOOT-04 | Yes | 01-03-SUMMARY.md |
| SHELL-01–06 | Yes | 02-02-SUMMARY.md |
| CONF-01–05 | Yes | 02-01-SUMMARY.md |
| TOOL-01–07 | Yes | 03-02-SUMMARY.md, 03-04-SUMMARY.md |
| DOCK-01–04 | Yes | 03-03-SUMMARY.md, 03-04-SUMMARY.md |
| MAINT-01 | Yes | 03-01-SUMMARY.md |

**Note on 03.1-01-SUMMARY.md:** Uses a different YAML structure without `requirements-completed` field. BOOT-02, SHELL-03, SHELL-04 are robustness improvements to already-satisfied requirements — their original satisfaction in Phases 1 and 2 is what counts for the cross-reference.

### 3-Source Status Determination

| REQ-ID | VERIFICATION | SUMMARY | REQUIREMENTS | Final Status |
|--------|-------------|---------|--------------|--------------|
| BOOT-01 | SATISFIED (passed) | listed | [x] | **satisfied** |
| BOOT-02 | SATISFIED (passed + 03.1) | listed | [x] | **satisfied** |
| BOOT-03 | SATISFIED (passed) | listed | [x] | **satisfied** |
| BOOT-04 | SATISFIED (passed) | listed | [x] | **satisfied** |
| SHELL-01 | SATISFIED (human_needed*) | listed | [x] | **satisfied** |
| SHELL-02 | SATISFIED (human_needed*) | listed | [x] | **satisfied** |
| SHELL-03 | SATISFIED (human_needed* + 03.1) | listed | [x] | **satisfied** |
| SHELL-04 | SATISFIED (human_needed* + 03.1) | listed | [x] | **satisfied** |
| SHELL-05 | SATISFIED (human_needed*) | listed | [x] | **satisfied** |
| SHELL-06 | SATISFIED (human_needed*) | listed | [x] | **satisfied** |
| CONF-01 | SATISFIED (human_needed*) | listed | [x] | **satisfied** |
| CONF-02 | SATISFIED (human_needed*) | listed | [x] | **satisfied** |
| CONF-03 | SATISFIED (human_needed*) | listed | [x] | **satisfied** |
| CONF-04 | SATISFIED (human_needed*) | listed | [x] | **satisfied** |
| CONF-05 | SATISFIED (human_needed*) | listed | [x] | **satisfied** |
| TOOL-01 | SATISFIED (passed) | listed | [x] | **satisfied** |
| TOOL-02 | SATISFIED (passed) | listed | [x] | **satisfied** |
| TOOL-03 | SATISFIED (passed) | listed | [x] | **satisfied** |
| TOOL-04 | SATISFIED (passed) | listed | [x] | **satisfied** |
| TOOL-05 | SATISFIED (passed) | listed | [x] | **satisfied** |
| TOOL-06 | SATISFIED (passed) | listed | [x] | **satisfied** |
| TOOL-07 | SATISFIED (passed) | listed | [x] | **satisfied** |
| DOCK-01 | SATISFIED (passed) | listed | [x] | **satisfied** |
| DOCK-02 | SATISFIED (passed) | listed | [x] | **satisfied** |
| DOCK-03 | SATISFIED (passed) | listed | [x] | **satisfied** |
| DOCK-04 | SATISFIED (passed) | listed | [x] | **satisfied** |
| MAINT-01 | SATISFIED (passed) | listed | [x] | **satisfied** |

*`human_needed` = all automated truths verified (9/9); 5 items deferred for live server confirmation. Implementation is statically correct.

**Score: 26/26 requirements satisfied. 0 unsatisfied. 0 orphaned.**

FAIL gate: Not triggered — no unsatisfied requirements.

---

## Cross-Phase Integration (from integration checker)

### Wiring Map

| Connection | From | To | Status | Evidence |
|---|---|---|---|---|
| lib/log.sh sourced by bootstrap.sh | Phase 01 | bootstrap.sh | WIRED | bootstrap.sh L37 |
| lib/os.sh sourced by bootstrap.sh | Phase 01 | bootstrap.sh | WIRED | bootstrap.sh L39 |
| lib/pkg.sh sourced by bootstrap.sh | Phase 01 | bootstrap.sh | WIRED | bootstrap.sh L41 |
| ARCH env var → all installer scripts | Phase 01 | Phases 01, 03 | WIRED | bootstrap.sh L129; consumed in all 4 installer scripts |
| DRY_RUN env var → all installer scripts | Phase 01 | Phases 01, 02, 03 | WIRED | bootstrap.sh L19; 16 guard checks across all scripts |
| MANIFEST_FILE → all installer scripts | Phase 01 | Phases 01, 02, 03 | WIRED | bootstrap.sh L10; 17 append calls across all scripts |
| _SUMMARY_* arrays → all installer scripts | Phase 01 | Phases 01, 02, 03 | WIRED | bootstrap.sh L22–24; 44 append operations across all 4 scripts |
| install-gitleaks.sh functions → bootstrap.sh | Phase 01 | bootstrap.sh | WIRED | bootstrap.sh L136–139 |
| lib/versions.sh → install-gitleaks.sh | Phase 03 | Phase 01 consumer | WIRED | install-gitleaks.sh L10 |
| lib/versions.sh → install-tools.sh | Phase 03 | Phase 03 | WIRED | install-tools.sh L13 |
| lib/versions.sh → install-docker.sh | Phase 03 | Phase 03 | WIRED | install-docker.sh L13 |
| lib/versions.sh → verify.sh | Phase 03 | Phase 03 | WIRED | verify.sh L11 |
| pkg_install/pkg_installed → install-shell.sh | Phase 01 | Phase 02 | WIRED | install_zsh and install_tmux call pkg_install/pkg_installed |
| install-shell.sh functions → bootstrap.sh | Phase 02 | bootstrap.sh | WIRED | bootstrap.sh L150–156 |
| install-tools.sh functions → bootstrap.sh | Phase 03 | bootstrap.sh | WIRED | bootstrap.sh L165–172 via _try_install |
| install-docker.sh functions → bootstrap.sh | Phase 03 | bootstrap.sh | WIRED | bootstrap.sh L175–179 |
| _already_installed helper → install_starship | Phase 3.1 | Phase 02 | WIRED | install-shell.sh L117 (Phase 3.1 fix) |
| .zshrc plugins → installed plugin dirs | Phase 02 | Phase 02 | WIRED | plugins=() list matches ZSH_CUSTOM/plugins/ clone targets |

**Total: 18/18 connections wired. 0 orphaned exports. 0 missing wires.**

### E2E Flows

| Flow | Requirements | Status | Notes |
|------|-------------|--------|-------|
| 1. Fresh server bootstrap (curl \| bash) | BOOT-01, BOOT-02, BOOT-03, BOOT-04, SHELL-01–06, CONF-01–05, TOOL-01–07, DOCK-01–04 | COMPLETE | Conditional on DOTFILES_REPO placeholder replacement (pre-publish step) |
| 2. Bootstrap re-run idempotency | BOOT-02, SHELL-03, SHELL-04 | COMPLETE | 12 installer functions have idempotency guards; Phase 3.1 fixed 2 pre-existing defects |
| 3. Post-relogin verification | TOOL-01–07, DOCK-01–04 | COMPLETE | scripts/verify.sh covers all Phase 3 outputs |

---

## Tech Debt Summary

### Cleared from Previous Audit (2026-02-22)

| Previous Item | Resolution | Phase |
|---|---|---|
| install_starship() unconditional re-download | Closed — _already_installed helper added (install-shell.sh L117) | 3.1 |
| install_tmux() wrong summary bucket on re-runs | Closed — pkg_installed pre-check added (install-shell.sh L139) | 3.1 |
| MAINT-01 traceability showed Phase 4 | Closed — REQUIREMENTS.md confirmed correct (Phase 3) without edits | 3.1 |

### Remaining (Non-Critical)

| Item | Phase | Impact | Action Required |
|---|---|---|---|
| `<YOUR_GITHUB_USER>` placeholder in bootstrap.sh:7 | Phase 01 | BOOT-01 live execution fails until replaced | User replaces with real GitHub username before publishing |
| Phase 02 live-session verification not done | Phase 02 | 5 items (prompt, plugins, tmux, idempotency) unconfirmed on real server | Run on live Ubuntu/RPi server; confirm interactively |
| No Phase 1/2 operator verify.sh | Cross-phase | Reduced operator confidence post-bootstrap for Phases 1/2 | Optional — add Phase 1/2 checks to verify.sh or create separate script |
| 16 human verification items across 4 phases | All | Cannot fully confirm without live server | Resolve after first real server deployment |

---

## Audit Result

**All 26 in-scope requirements: SATISFIED**
All 3 previous tech debt items: CLEARED by Phase 3.1
New critical gaps: NONE
Remaining items: Deferred human verification + pre-publish placeholder (both existed from the first audit)

Status: **TECH DEBT** (no blockers; deferred verification items need resolution on real server hardware)

---

_Audited: 2026-02-23_
_Verifier: Claude (gsd-integration-checker + orchestrator)_
_Re-audit of: 2026-02-22 v1.0 audit_
